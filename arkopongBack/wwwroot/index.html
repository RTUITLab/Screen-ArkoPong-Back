<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>SignalR Chat - Metanit.com</title>
</head>
<body>
    <div id="inputForm">
        <input type="button" id="leftBtn" value="Лево" disabled="true" />
        <input type="button" id="rightBtn" value="Право" disabled="true" />
    </div>
<div id="pong"></div>
<script src="js/signalr/dist/browser/signalr.min.js"></script>
<script>

    tvid = location.hash.replace('#', '');

    hubConnection = new signalR.HubConnectionBuilder()
        .withUrl("/pong")
        .build();

    hubConnection.start().then(() => {
        hubConnection.invoke("Connect", tvid);
        console.log("Connection request was sent");
    });

    hubConnection.on("Connected", function() {
        document.getElementById("leftBtn").disabled = false;
        document.getElementById("rightBtn").disabled = false;
    });

    document.getElementById("leftBtn").addEventListener("mousedown", function (e) {
        hubConnection.invoke("SendDirection", 1, tvid);
    });

    document.getElementById("leftBtn").addEventListener("mouseup", function (e) {
        hubConnection.invoke("SendDirection", 0, tvid);
    });

    document.getElementById("rightBtn").addEventListener("mousedown", function (e) {
        hubConnection.invoke("SendDirection", -1, tvid);
    });

    document.getElementById("rightBtn").addEventListener("mouseup", function (e) {
        hubConnection.invoke("SendDirection", 0, tvid);
    });
</script>
</body>
</html>