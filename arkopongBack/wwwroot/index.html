<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>SignalR Chat - Metanit.com</title>
</head>
<body>
    <div id="inputForm">
        <input type="button" id="connectBtn" value="Присоединится" />
        <input type="button" id="leftBtn" value="Лево" disabled="true" />
        <input type="button" id="rightBtn" value="Право" disabled="true" />
    </div>
<div id="pong"></div>
<script src="js/signalr/dist/browser/signalr.min.js"></script>
<script>
    hubConnection = new signalR.HubConnectionBuilder()
        .withUrl("/pong")
        .build();

    hubConnection.on("Connected", function() {
        document.getElementById("leftBtn").disabled = false;
        document.getElementById("rightBtn").disabled = false;
        //document.getElementById("connectBtn").disabled = true;
    });

    //document.getElementById("connectBtn").addEventListener("click", function (e) {
    //    hubConnection.invoke("Connect");
    //});

    document.getElementById("leftBtn").addEventListener("mousedown", function (e) {
        hubConnection.invoke("SendDirection", 1);
    });

    document.getElementById("leftBtn").addEventListener("mouseup", function (e) {
        hubConnection.invoke("SendDirection", 0);
    });

    document.getElementById("rightBtn").addEventListener("mousedown", function (e) {
        hubConnection.invoke("SendDirection", -1);
    });

    document.getElementById("rightBtn").addEventListener("mouseup", function (e) {
        hubConnection.invoke("SendDirection", 0);
    });

    hubConnection.start().then(() => { hubConnection.invoke("Connect");
        console.log("started");
    });

    console.log(location.hash.replace('#', ''));
</script>
</body>
</html>